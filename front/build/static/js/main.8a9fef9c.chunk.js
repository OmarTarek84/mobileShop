(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t){},138:function(e,t,a){},139:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),l=a.n(i),o=(a(71),a(3)),s=a(4),c=a(6),u=a(5),m=a(7),d=(a(72),a(16)),p=(a(73),a(74),a(75),a(15)),h=function(e){return r.a.createElement("li",{className:"nav-li"},r.a.createElement(p.b,{to:e.link,onClick:e.close,exact:!0},e.children))},f=a(38),b=a.n(f),v=(a(84),function(e){return e.show?r.a.createElement("div",{className:"backdrop",onClick:e.close},e.children):null}),g=a(1),E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sideDrawerClose:!0},a.sideDrawerClose=function(){a.setState({sideDrawerClose:!0})},a.sideDrawerOpen=function(){a.setState({sideDrawerClose:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t={transform:"translateX(0)"};return t=this.state.sideDrawerClose?{transform:"translateX(-105%)"}:{transform:"translateX(0)"},e=this.props.isAuthorized?r.a.createElement("ul",null,r.a.createElement(h,{close:this.sideDrawerClose,link:"/"},"Mobiles"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/new"},"Create"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/cart"},"My Cart"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/orders"},"My Orders"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/logout"},"Log Out")):r.a.createElement("ul",null,r.a.createElement(h,{close:this.sideDrawerClose,link:"/"},"Mobiles"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/authenticate"},"Sign Up"),r.a.createElement(h,{close:this.sideDrawerClose,link:"/signin"},"Sign In")),r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"big-screen"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:b.a,alt:"mobile"}),this.props.firstname?r.a.createElement("p",{style:{display:"inline-block",marginLeft:"10px",color:"white"}},"Welcome ",this.props.firstname):null),r.a.createElement("div",{className:"navitems"},e)),r.a.createElement("nav",{className:"small-screen"},r.a.createElement("div",{className:"nav-sidedrawer"},r.a.createElement("div",{className:"toggleButton",onClick:this.sideDrawerOpen},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("div",{className:"sidedrawer",style:t},r.a.createElement("div",{className:"sidedrawer-close",onClick:this.sideDrawerClose},r.a.createElement("p",null,"Close")),r.a.createElement("div",{className:"sidedrawer-nav"},e))),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:b.a,alt:"mobile"}))),r.a.createElement(v,{close:this.sideDrawerClose,show:!this.state.sideDrawerClose}))}}]),t}(n.Component),y=Object(g.b)(function(e){return{firstname:e.firstname,isAuthorized:null!==e.token}})(E),I=function(e){return r.a.createElement("div",{className:"layout"},r.a.createElement(y,null),r.a.createElement("main",{className:"main"},e.children))},C=a(22),O=(a(86),a(87),a(88),function(e){return r.a.createElement("button",{onClick:e.clicked,type:e.type,disabled:e.disabled,className:"buttonn"},e.children)}),k=(a(89),Object(g.b)(function(e){return{isAuthorized:null!==e.token,userId:e.userId}})(Object(d.f)(function(e){return r.a.createElement("div",{className:"mobile-card",key:e.id},e.isAuthorized&&e.userId!==e.mobileUserID?r.a.createElement("div",{className:"AddToCart"},r.a.createElement(O,{clicked:e.addToCart,disabled:e.onDisabled},"Add To Cart")):null,r.a.createElement("div",{className:"mobile-image"},r.a.createElement("img",{src:e.image,alt:"mobileImage"})),r.a.createElement("div",{className:"mobile-type-price"},r.a.createElement("div",{className:"mobile-type"},r.a.createElement("p",null,e.title)),r.a.createElement("div",{className:"mobile-price"},r.a.createElement("p",null,"$",e.price))),r.a.createElement("div",{className:"createdby"},r.a.createElement("p",null,"Created By: ",r.a.createElement("span",{style:{fontWeight:"bolder"}},e.firstname," ",e.lastname))),e.isAuthorized?r.a.createElement("div",{className:"buttons"},e.userId===e.mobileUserID?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{clicked:e.editClicked},"Edit"),r.a.createElement(O,{clicked:e.detailClicked},"Details")):r.a.createElement(O,{clicked:e.detailClicked},"Details")):null)}))),S=(a(90),function(e){return r.a.createElement("div",{className:"Loader"})}),w=function(e){var t=r.a.createElement(S,null);return e.mobilesExist&&(t=e.mobiles.map(function(t){return r.a.createElement(k,{key:t._id,id:t._id,title:t.title,price:t.price,firstname:t.userId.firstname,lastname:t.userId.lastname,editClicked:e.clickedEdit.bind(void 0,t._id),mobileUserID:t.userId._id,detailClicked:e.goToDetail.bind(void 0,t._id),image:t.imageUrl,addToCart:e.addCart.bind(void 0,t),onDisabled:e.buttonDisabled})})),r.a.createElement(r.a.Fragment,null,t)},j=a(2),T=a.n(j),M=a(62),N=a.n(M),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isActive=!0,a.state={mobiles:[],noMobiles:!1,cartAdded:!1,cartAddedItem:null,buttonDisabled:!1},a.onGoToEdit=function(e){var t=a.state.mobiles.find(function(t){return t._id===e});localStorage.setItem("filteredMobile",JSON.stringify(t)),a.props.history.push({pathname:"/edit/"+e,search:"?edit=true",state:{filteredMobile:t}})},a.onGoToDetail=function(e){var t=a.state.mobiles.find(function(t){return t._id===e});localStorage.setItem("filteredMobile",JSON.stringify(t)),a.props.history.push({pathname:"/mobile/"+e})},a.onGoToCart=function(){a.props.history.push("/cart")},a.onFetchMobiles=function(){T.a.post("/graphql",JSON.stringify({query:"\n            query {\n                mobiles {\n                  _id\n                  title\n                  description\n                  price\n                  model\n                  imageUrl\n                  createdAt\n                  userId {\n                    _id\n                    firstname\n                    lastname\n                    email\n                  }\n                }\n              }\n            "}),{headers:{"Content-Type":"application/json"}}).then(function(e){if(a.isActive){var t=e.data.data.mobiles;t.length<=0?a.setState({noMobiles:!0}):a.setState({mobiles:t,noMobiles:!1})}}).catch(function(e){console.log(e)})},a.closeBackdrop=function(){a.setState({cartAdded:!1})},a.addToCart=function(e){a.setState({buttonDisabled:!0});var t={query:"\n                mutation AddToCart($mobile: AddedMobileToCartInput!) {\n                    addToCart(mobile: $mobile) {\n                        mobileId {\n                        _id\n                        title\n                        price\n                        createdAt\n                        updatedAt\n                        imageUrl\n                        }\n                        quantity\n                        userId {\n                        _id\n                        email\n                        firstname\n                        lastname\n                        }\n                    }\n                }\n            ",variables:{mobile:{_id:e._id,title:e.title,description:e.description,model:e.model,price:e.price,imageUrl:e.imageUrl}}};T.a.post("/graphql",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.setState({cartAdded:!0,cartAddedItem:e.data.data.addToCart,buttonDisabled:!1})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.onFetchMobiles();var t=N()("/");t.on("newMobile",function(t){e.setState(function(e){return{mobiles:e.mobiles.concat(t.mobile)}})}),t.on("editedMobile",function(t){var a=Object(C.a)(e.state.mobiles);a[e.state.mobiles.findIndex(function(e){return e._id===t.mobile._id})]=t.mobile,e.setState({mobiles:a})})}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"mobiles-title"},"Our ",r.a.createElement("span",null,"Mobiles")),r.a.createElement("div",{className:"mobiles"},this.state.noMobiles?r.a.createElement("p",{className:"Nomobiles"},"No Mobiles Here Yet!!"):r.a.createElement(w,{mobiles:this.state.mobiles,mobilesExist:this.state.mobiles.length>0,clickedEdit:this.onGoToEdit,goToDetail:this.onGoToDetail,addCart:this.addToCart,buttonDisabled:this.state.buttonDisabled})),this.state.cartAdded?r.a.createElement(v,{show:!0,close:this.closeBackdrop},r.a.createElement("div",{className:"item-added-parent"},r.a.createElement("h3",null,"Item added To Cart"),r.a.createElement("div",{className:"item-added-image"},r.a.createElement("img",{src:this.state.cartAddedItem.mobileId.imageUrl,alt:"cart-mobile"})),r.a.createElement("p",null,this.state.cartAddedItem.mobileId.title),r.a.createElement("p",null,"Price: ",r.a.createElement("span",null,"$",this.state.cartAddedItem.mobileId.price)),r.a.createElement("div",{style:{marginTop:"7px"}},r.a.createElement(O,{clicked:this.closeBackdrop},"Continue Shopping")),r.a.createElement("div",{style:{marginTop:"5px"}},r.a.createElement(O,{clicked:this.onGoToCart},"Go To Cart")))):null)}}]),t}(n.Component),D=Object(g.b)(function(e){return{token:e.token}})(A),q=a(8),_=(a(138),a(139),function(e){var t,a=["inputtype"],n=["form-control"],i=r.a.createElement("p",null);switch(e.showinput&&n.push("displaynone"),e.touched&&(e.invalid?(a.push("invalid"),"email"===e.elementConfig.name&&(i=r.a.createElement("p",{className:"errormessage"},"Email is Invalid")),"firstname"===e.elementConfig.name&&(i=r.a.createElement("p",{className:"errormessage"},"This field is required")),"lastname"===e.elementConfig.name&&(i=r.a.createElement("p",{className:"errormessage"},"This field is required")),"password"===e.elementConfig.name&&(i=r.a.createElement("p",{className:"errormessage"},"password should be at least 6 characters")),"confirmpassword"===e.elementConfig.name&&(i=r.a.createElement("p",{className:"errormessage"},"must match password field"))):a.push("valid")),e.elementType){case"input":t=r.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value,onChange:e.changed,className:a.join(" ")}));break;case"textarea":t=r.a.createElement("textarea",Object.assign({},e.elementConfig,{value:e.value,onChange:e.changed}));break;case"select":t=r.a.createElement("select",{value:e.value,onChange:e.changed},e.elementConfig.options.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.displayValue)}));break;default:t=r.a.createElement("input",Object.assign({},e.elementConfig,{value:e.value,onChange:e.changed,className:a.join(" ")}))}return r.a.createElement("div",{className:n.join(" ")},r.a.createElement("label",null,e.label),t,i)}),F=function(e,t,a){return{type:"LOGIN",token:e,userId:t,firstname:a,error:null}},$=function(e){return function(t){return T.a.post("/oauth/google",{access_token:e.accessToken}).then(function(e){t(P(e.data.token,e.data.userId,e.data.firstname))}).catch(function(e){console.log(e)})}},P=function(e,t,a){return localStorage.setItem("token",e),localStorage.setItem("userId",t),localStorage.setItem("firstname",a),localStorage.setItem("expDate",(new Date).getTime()+36e5),function(n){n(F(e,t,a)),n(x())}},L=function(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("firstname"),localStorage.removeItem("expDate"),{type:"LOGOUT"}},x=function(){return function(e){setTimeout(function(){e(L())},36e5)}},U=function(){return function(e){var t=localStorage.getItem("token"),a=new Date(localStorage.getItem("expDate")),n=localStorage.getItem("userId");t?new Date>a?e(L()):(e(F(t,n,localStorage.getItem("firstname"))),e(x())):e(L())}},V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={authForm:{email:{elementType:"input",elementConfig:{name:"email",type:"email"},validationRules:{required:!0,isEmail:!0},value:"",valid:!1,touched:!1,errorMessage:"",show:!0},firstname:{elementType:"input",elementConfig:{name:"firstname",type:"text"},validationRules:{required:!0},value:"",valid:!1,touched:!1,errorMessage:"",show:!0},lastname:{elementType:"input",elementConfig:{name:"lastname",type:"text"},validationRules:{required:!0},value:"",valid:!1,touched:!1,errorMessage:"",show:!0},password:{elementType:"input",elementConfig:{name:"password",type:"password"},validationRules:{required:!0,minLength:!0},value:"",valid:!1,touched:!1,errorMessage:"",show:!0},confirmpassword:{elementType:"input",elementConfig:{name:"confirmpassword",type:"password"},validationRules:{required:!0,withPassword:!0},value:"",valid:!1,touched:!1,errorMessage:"",show:!0}},formIsValid:!1},a.changeInputHandler=function(e,t){var n=Object(q.a)({},a.state.authForm),r=Object(q.a)({},n[t]);r.value=e.target.value,r.touched=!0,r.valid=a.checkValidity(r.value,r.validationRules),n[t]=r;var i=!0;for(var l in n)i=n[l].valid&&i;a.setState({authForm:n,formIsValid:i})},a.checkValidity=function(e,t){var n=!0;if(t.required&&(n=""!==e.trim()&&n),t.isEmail){n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&n}return t.minLength&&(n=e.length>=6&&n),t.withPassword&&(n=e===a.state.authForm.password.value&&n),n},a.onSubmitForm=function(e){var t;e.preventDefault();var n=a.state.authForm.email.value,r=a.state.authForm.password.value,i=a.state.authForm.firstname.value,l=a.state.authForm.lastname.value;t={query:"\n                    mutation CreateUser($email: String!, $password: String!, $confirmPassword: String!, $firstname: String!, $lastname: String!) {\n                        createUser(userInput: {\n                            email: $email,\n                            password: $password,\n                            confirmPassword: $confirmPassword,\n                            firstname: $firstname,\n                            lastname: $lastname\n                        }) {\n                            _id\n                            email\n                            firstname\n                            lastname\n                        }\n                    }\n                ",variables:{email:n,password:r,confirmPassword:a.state.authForm.confirmpassword.value,firstname:i,lastname:l}},T.a.post("/graphql",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(function(e){a.props.history.push("/signin")}).catch(function(e){})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[];for(var a in this.state.authForm)t.push({id:a,config:this.state.authForm[a]});return r.a.createElement("div",{className:"formParent"},r.a.createElement("h1",null,"SIGN UP Form"),r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmitForm},t.map(function(t){return r.a.createElement(_,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,label:t.id.toUpperCase(),changed:function(a){return e.changeInputHandler(a,t.id)},invalid:!t.config.valid,touched:t.config.touched,error:t.config.errorMessage,showinput:!t.config.show})}),r.a.createElement("div",{className:"submit-button"},r.a.createElement(O,{type:"submit",disabled:!this.state.formIsValid},"SIGN UP!"))))}}]),t}(n.Component),R=Object(g.b)(null,function(e){return{onAuthGoogle:function(t){return e($(t))}}})(V),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={authForm:{email:{elementType:"input",elementConfig:{name:"email",type:"email"},validationRules:{required:!0,isEmail:!0},value:"",valid:!1,touched:!1},password:{elementType:"input",elementConfig:{name:"password",type:"password"},validationRules:{required:!0,minLength:!0},value:"",valid:!1,touched:!1},confirmpassword:{elementType:"input",elementConfig:{name:"confirmpassword",type:"password"},validationRules:{required:!0,withPassword:!0},value:"",valid:!1,touched:!1}},formIsValid:!1},a.changeAuthHandler=function(){a.setState(function(e){return{isLogIn:!e.isLogIn}})},a.changeInputHandler=function(e,t){var n=Object(q.a)({},a.state.authForm),r=Object(q.a)({},n[t]);r.value=e.target.value,r.touched=!0,r.valid=a.checkValidity(r.value,r.validationRules),n[t]=r;var i=!0;for(var l in n)i=n[l].valid&&i;a.setState({authForm:n,formIsValid:i})},a.checkValidity=function(e,t){var n=!0;if(t.required&&(n=""!==e.trim()&&n),t.isEmail){n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&n}return t.minLength&&(n=e.length>=6&&n),t.withPassword&&(n=e===a.state.authForm.password.value&&n),n},a.onSubmitForm=function(e){var t;e.preventDefault(),t={query:"\n                query LoginUser($email: String!, $password: String!) {\n                    loginUser(email: $email, password: $password) {\n                        token\n                        tokenExpiration\n                        userId\n                        firstname\n                      }\n                }\n            ",variables:{email:a.state.authForm.email.value,password:a.state.authForm.password.value}},T.a.post("/graphql",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then(function(e){a.props.onLogIn(e.data.data.loginUser.token,e.data.data.loginUser.userId,e.data.data.loginUser.firstname),a.props.checkAuthState(),a.props.history.push("/")}).catch(function(e){})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[];for(var a in this.state.authForm)t.push({id:a,config:this.state.authForm[a]});return r.a.createElement("div",{className:"formParent"},r.a.createElement("h1",null,"SIGN IN Form"),r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmitForm},t.map(function(t){return r.a.createElement(_,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,label:t.id.toUpperCase(),changed:function(a){return e.changeInputHandler(a,t.id)},invalid:!t.config.valid,touched:t.config.touched})}),r.a.createElement("div",{className:"submit-button"},r.a.createElement(O,{type:"submit",disabled:!this.state.formIsValid},"SIGN IN!"))))}}]),t}(n.Component),G=Object(g.b)(null,function(e){return{onLogIn:function(t,a,n){return e(P(t,a,n))},checkAuthState:function(){return e(U())},onAuthGoogle:function(t){return e($(t))}}})(B),z=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onLogout()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,{to:"/"}))}}]),t}(n.Component),J=Object(g.b)(null,function(e){return{onLogout:function(){return e(L())}}})(z),H=a(63),W=a.n(H),X=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={createMobileForm:{Title:{elementType:"input",elementConfig:{name:"title",type:"text"},validationRules:{required:!0},value:"",valid:!1,touched:!1},Description:{elementType:"textarea",elementConfig:{name:"description",type:"text"},validationRules:{required:!0,maxLength:!0},value:"",valid:!1,touched:!1},Price:{elementType:"input",elementConfig:{name:"price",type:"number"},validationRules:{required:!0},value:"",valid:!1,touched:!1},Model:{elementType:"select",elementConfig:{options:[{value:"samsung",displayValue:"Samsung"},{value:"iphone",displayValue:"Iphone"},{value:"oppo",displayValue:"Oppo"},{value:"vivo",displayValue:"Vivo"},{value:"nokia",displayValue:"Nokia"},{value:"lenovo",displayValue:"Lenovo"},{value:"sony",displayValue:"Sony"}]},validationRules:{required:!0,minLength:!0},value:"samsung",valid:!0,touched:!1},mobile_Picture:{elementType:"input",elementConfig:{type:"file",name:"pic",accept:".png, .jpg, .jpeg"},validationRules:{required:!0},value:"",imageValue:"",valid:!1,touched:!1}},formIsValid:!1,mode:"create",filteredMobile:null,file:null,imageSelected:null},a.changeInputHandler=function(e,t){var n=Object(q.a)({},a.state.createMobileForm),r=Object(q.a)({},n[t]);if(r.value=e.target.value,"mobile_Picture"===t&&e.target.files[0]){var i=e.target.files[0];a.setState({file:i,imageSelected:URL.createObjectURL(i)})}r.touched=!0,r.valid=a.checkValidity(r.value,r.validationRules),n[t]=r;var l=!0;for(var o in n)l=n[o].valid&&l;a.setState({createMobileForm:n,formIsValid:l})},a.checkValidity=function(e,t){var a=!0;return t.required&&(a=""!==e.trim()&&a),t.maxLength&&(a=e.length<150&&a),a},a.onSubmitForm=function(e){e.preventDefault(),a.setState({formIsValid:!1});var t=new FormData;t.append("pic",a.state.file),fetch("http://localhost:8080/post-image",{method:"PUT",headers:{Authorization:"Bearer "+a.props.token},body:t}).then(function(e){return e.json()}).then(function(e){var t,n=e.filePath,r=a.state.createMobileForm.Title.value,i=a.state.createMobileForm.Description.value,l=+a.state.createMobileForm.Price.value,o=a.state.createMobileForm.Model.value;return t="create"===a.state.mode?{query:"\n                          mutation CreateMobile($title: String!, $description: String!, $price: Float!, $model: String!, $imageUrl: String!) {\n                              createMobile(mobileInput: {\n                                  title: $title,\n                                  description: $description,\n                                  price: $price,\n                                  model: $model,\n                                  imageUrl: $imageUrl\n                                }) {\n                                  title\n                                  description\n                                }\n                          }\n                      ",variables:{title:r,description:i,price:l,model:o,imageUrl:n}}:{query:"\n                          mutation EditMobile($mobileId: String!, $newMobile: MobileInput!) {\n                              editMobile(mobileId: $mobileId, newMobile: $newMobile) {\n                                  _id\n                                  title\n                                  description\n                                  price\n                                  model\n                                  imageUrl\n                                  userId {\n                                      _id\n                                      firstname\n                                      lastname\n                                      email\n                                  }\n                                }\n                          }\n                      ",variables:{mobileId:a.state.filteredMobile._id,newMobile:{title:a.state.createMobileForm.Title.value,description:a.state.createMobileForm.Description.value,price:+a.state.createMobileForm.Price.value,model:a.state.createMobileForm.Model.value,imageUrl:n}}},T.a.post("/graphql",JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.props.history.push("/")}).catch(function(e){console.log(e)})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=W.a.parse(this.props.location.search);for(var t in e)if(e[t]){var a=this.props.location.state.filteredMobile,n=Object(q.a)({},this.state.createMobileForm),r=Object(q.a)({},n.Title),i=Object(q.a)({},n.Description),l=Object(q.a)({},n.Price),o=Object(q.a)({},n.Model);r.value=a.title,r.valid=!0,i.value=a.description,i.valid=!0,l.value=a.price,l.valid=!0,o.value=a.model,o.valid=!0,n.Title=r,n.Description=i,n.Price=l,n.Model=o,this.setState({createMobileForm:n,mode:"edit",filteredMobile:a})}else this.setState({mode:"create"})}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.createMobileForm)t.push({id:a,config:this.state.createMobileForm[a]});return r.a.createElement("div",{className:"formParent"},r.a.createElement("h1",null,"create"===this.state.mode?"Create A New Mobile Item":"Edit Your Mobile"),r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmitForm,encType:"multipart/form-data"},t.map(function(t){return r.a.createElement(_,{key:t.id,elementType:t.config.elementType,elementConfig:t.config.elementConfig,value:t.config.value,label:t.id.toUpperCase(),changed:function(a){return e.changeInputHandler(a,t.id)},invalid:!t.config.valid,touched:t.config.touched})}),this.state.imageSelected?r.a.createElement("div",{className:"image-selected"},r.a.createElement("img",{src:this.state.imageSelected,alt:"mobileImage"})):null,r.a.createElement("div",{className:"submit-button"},r.a.createElement(O,{type:"submit",disabled:!this.state.formIsValid},"create"===this.state.mode?"Create New Mobile":"Edit Mobile"))))}}]),t}(n.Component),Y=Object(g.b)(function(e){return{token:e.token,userId:e.userId}})(X),Z=(a(142),function(e){return r.a.createElement("div",{className:"mobile-detail"},r.a.createElement("h1",null,e.title),r.a.createElement("div",{className:"mobile-detail_flex"},r.a.createElement("div",{className:"mobile-detail_flex_image"},r.a.createElement("img",{src:e.image,alt:"myImage"})),r.a.createElement("div",{className:"mobile-detail_flex_info"},r.a.createElement("h3",null,"Model: ",r.a.createElement("span",null,e.model)),r.a.createElement("h5",null,"Price: ",r.a.createElement("span",null,"$",e.price)),r.a.createElement("div",{className:"mobile-detail_flex_info_desc"},r.a.createElement("span",null,"Some Info About This Mobile:"),r.a.createElement("p",null,e.description)),r.a.createElement("div",{className:"createAt"},r.a.createElement("p",null,"This Mobile Product was created on: ",r.a.createElement("span",null,e.date)),r.a.createElement("p",null,"created By: ",r.a.createElement("span",null,e.firstname," ",e.lastname)),r.a.createElement("p",null,"Mobile Product Creator Contact: ",r.a.createElement("span",null,e.useremail))),r.a.createElement("div",{className:"mobile-detail_flex_info_buttons"},r.a.createElement(O,{clicked:e.onGoToMobiles},"Back To Mobile List"),e.userSignedin!==e.mobileUserId?r.a.createElement(O,{clicked:e.addToCart.bind(void 0,e.id,e.title,e.description,e.model,e.price,e.image),disabled:e.onDisabled},"Add To Cart"):null))))}),Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filteredMobile:null,buttonDisabled:!1},a.addToCart=function(e,t,n,r,i,l){a.setState({buttonDisabled:!0});var o={query:"\n                mutation AddToCart($mobile: AddedMobileToCartInput!) {\n                    addToCart(mobile: $mobile) {\n                        mobileId {\n                        _id\n                        title\n                        price\n                        createdAt\n                        updatedAt\n                        imageUrl\n                        }\n                        quantity\n                        userId {\n                        _id\n                        email\n                        firstname\n                        lastname\n                        }\n                    }\n                }\n            ",variables:{mobile:{_id:e,title:t,description:n,model:r,price:i,imageUrl:l}}};T.a.post("/graphql",o,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.props.history.push("/cart")})},a.onGoToMobiles=function(){a.props.history.push("/")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({filteredMobile:JSON.parse(localStorage.getItem("filteredMobile"))})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,{title:this.state.filteredMobile.title,description:this.state.filteredMobile.description,price:this.state.filteredMobile.price,model:this.state.filteredMobile.model,onGoToMobiles:this.onGoToMobiles,date:this.state.filteredMobile.createdAt,firstname:this.state.filteredMobile.userId.firstname,id:this.state.filteredMobile._id,lastname:this.state.filteredMobile.userId.lastname,useremail:this.state.filteredMobile.userId.email,image:this.state.filteredMobile.imageUrl,addToCart:this.addToCart,onDisabled:this.state.buttonDisabled,mobileUserId:this.state.filteredMobile.userId._id,userSignedin:this.props.userId}))}}]),t}(n.Component),K=Object(g.b)(function(e){return{token:e.token,userId:e.userId}})(Q),ee=(a(143),a(64)),te=a.n(ee),ae=function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement("img",{src:e.imageUrl,alt:"my phoneimage"}))),r.a.createElement("td",null,e.title),r.a.createElement("td",{className:"table-cart-price"},"$",e.price),r.a.createElement("td",null,r.a.createElement("span",{onClick:e.onCartDecrement},"-")," ",e.quantity," ",r.a.createElement("span",{onClick:e.onCartIncrement},"+")),r.a.createElement("td",null,r.a.createElement("div",{className:"trash-image",onClick:e.removeCart},r.a.createElement("img",{src:te.a,alt:"trashImage"}))),r.a.createElement("td",null,"$",e.totalPrice))},ne=(a(144),function(e){var t=e.carts.map(function(t){return r.a.createElement(ae,{key:t._id,id:t._id,price:t.mobileId.price,imageUrl:t.mobileId.imageUrl,quantity:t.quantity,title:t.mobileId.title,totalPrice:t.quantity*t.mobileId.price,onCartIncrement:e.onIncrementCart.bind(void 0,t._id),onCartDecrement:e.onDecrementCart.bind(void 0,t._id),removeCart:e.onRemoveCart.bind(void 0,t._id)})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{overflowX:"auto"}},r.a.createElement("table",{className:"cart-parent",border:"1"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Products"),r.a.createElement("th",null,"Name Of Product"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Remove"),r.a.createElement("th",null,"Total Price"))),r.a.createElement("tbody",null,t))),r.a.createElement("div",{className:"clear_and_order"},r.a.createElement("button",{className:"clear_cart",onClick:e.clearCart},"Clear Cart"),r.a.createElement("div",{className:"order_total"},r.a.createElement("p",null,"Subtotal: ",r.a.createElement("span",null,"$",e.subTotalPrice)),r.a.createElement("p",null,"Tax: ",r.a.createElement("span",null,"$",(.1*e.subTotalPrice).toFixed(2))),r.a.createElement("p",null,"Total: ",r.a.createElement("span",null,"$",(e.subTotalPrice+.1*e.subTotalPrice).toFixed(2)))),r.a.createElement("div",{className:"order_stripe"},r.a.createElement(O,{clicked:e.onOrder,disabled:e.onDisabled},"Order Now!"))))}),re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).isActive=!0,a.state={carts:[],noItemsInCart:!1,quantity:1,totalPrice:0,isLoading:!1,onDisabled:!1,showPayment:!1},a.onFetchCarts=function(){a.setState({isLoading:!0});var e={query:"\n                query Cart($userId: String) {\n                    cart(userId: $userId) {\n                        _id\n                        mobileId {\n                            _id\n                            title\n                            imageUrl\n                            price\n                        }\n                        userId {\n                            _id\n                            email\n                            firstname\n                            lastname\n                        }\n                        quantity\n                  }\n                }\n            ",variables:{userId:localStorage.getItem("userId")}};T.a.post("/graphql",JSON.stringify(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.isActive&&(e.data.data.cart.map(function(e){a.setState(function(t){return{totalPrice:t.totalPrice+=e.mobileId.price*e.quantity}})}),e.data.data.cart.length<=0?a.setState({noItemsInCart:!0,isLoading:!1}):a.setState({carts:e.data.data.cart,noItemsInCart:!1,isLoading:!1}))}).catch(function(e){a.setState({isLoading:!1,noItemsInCart:!0}),setTimeout(function(){a.props.history.push("/authenticate")},4e3)})},a.onCartIncrement=function(e){a.setState({isLoading:!0});var t={query:"\n                mutation IncrementItemToCart($cartId: String!) {\n                    incrementItemToCart(cartId: $cartId) {\n                        quantity\n                        userId {\n                          email\n                        }\n                        mobileId {\n                          title\n                          description\n                          price\n                        }\n                      }\n                }\n            ",variables:{cartId:e}};T.a.post("/graphql",JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(t){var n=Object(C.a)(a.state.carts),r=n.findIndex(function(t){return t._id===e});n[r].quantity+=1;var i=a.state.totalPrice+t.data.data.incrementItemToCart.mobileId.price;a.setState({carts:n,totalPrice:i,isLoading:!1})}).catch(function(e){a.setState({isLoading:!1})})},a.onCartDecrement=function(e){a.setState({isLoading:!0});var t={query:"\n                mutation DecrementItemToCart($cartId: String!) {\n                    decrementItemToCart(cartId: $cartId) {\n                        quantity\n                        userId {\n                          email\n                        }\n                        mobileId {\n                          title\n                          description\n                          price\n                        }\n                      }\n                }\n            ",variables:{cartId:e}};T.a.post("/graphql",JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(t){var n,r=Object(C.a)(a.state.carts),i=r.findIndex(function(t){return t._id===e}),l=r.find(function(t){return t._id===e});r[i].quantity>1?(r[i].quantity-=1,n=a.state.totalPrice-t.data.data.decrementItemToCart.mobileId.price):(r.splice(e,1),n=a.state.totalPrice-l.mobileId.price,r.length<=0&&a.setState({noItemsInCart:!0})),a.setState({carts:r,totalPrice:n,isLoading:!1})}).catch(function(e){a.setState({isLoading:!1})})},a.onClearCart=function(){a.setState({isLoading:!0});T.a.post("/graphql",{query:"\n                mutation {\n                    clearCart {\n                    email\n                    }\n                }  \n            "},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.setState({totalPrice:0,noItemsInCart:!0,isLoading:!1})})},a.removeCart=function(e){a.setState({isLoading:!0});var t={query:"\n                mutation RemoveCart($cartId: String!) {\n                    removeCart(cartId: $cartId) {\n                        email\n                      }\n                }\n            ",variables:{cartId:e}};T.a.post("/graphql",t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){a.onFetchCarts(),a.setState({totalPrice:0,isLoading:!1})}).catch(function(e){a.setState({isLoading:!1})})},a.onOrder=function(){a.setState({onDisabled:!0});T.a.post("/graphql",{query:"\n            mutation {\n                createOrder {\n                  order {\n                    mobile {\n                      price\n                    }\n                    quantity\n                  }\n                  userId {\n                    email\n                  }\n                }\n              }\n            "},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){console.log(e),a.props.history.push("/orders")}).catch(function(e){})},a.backdropClose=function(){a.setState({showPayment:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.onFetchCarts()}},{key:"componentWillUnmount",value:function(){this.isActive=!1}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.isLoading?r.a.createElement("div",{className:"spinner-parent"},r.a.createElement(S,null)):this.state.noItemsInCart?r.a.createElement("h1",{style:{textAlign:"center",paddingTop:"40px"}},"No Items In Your Cart"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center",paddingTop:"30px",paddingBottom:"30px"}},"Your ",r.a.createElement("span",{style:{color:"#07393C"}},"Cart")),r.a.createElement(ne,{carts:this.state.carts,onIncrementCart:this.onCartIncrement,onDecrementCart:this.onCartDecrement,subTotalPrice:this.state.totalPrice,clearCart:this.onClearCart,onRemoveCart:this.removeCart,onOrder:this.onOrder})))}}]),t}(n.Component),ie=Object(g.b)(function(e){return{userId:e.userId,token:e.token,firstname:e.firstname}})(re),le=(a(145),a(146),function(e){return r.a.createElement("div",{className:"order",key:e.id},r.a.createElement("h3",null,"Order: #",r.a.createElement("span",null,e.id)),e.orderMobiles.map(function(e){return r.a.createElement("div",{className:"order-detail",key:e.mobile._id},r.a.createElement("p",null,e.mobile.title," (",r.a.createElement("span",null,e.quantity),")"))}),r.a.createElement("div",null,"Date of Order: ",r.a.createElement("span",null,e.date)))}),oe=function(e){return e.orders.map(function(e){return r.a.createElement(le,{id:e._id,key:e._id,orderMobiles:e.order,date:e.createdAt})})},se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={orders:[],isLoading:!1,noOrders:!1},a.onFetchOrders=function(){a.setState({isLoading:!0});var e={query:"\n                query Orders($userId: String) {\n                    orders(userId: $userId) {\n                        _id\n                        order {\n                          mobile {\n                            _id\n                            price\n                            title\n                          }\n                          quantity\n                        }\n                        userId {\n                          firstname\n                        }\n                        createdAt\n                      }\n                }\n            ",variables:{userId:localStorage.getItem("userId")}};T.a.post("/graphql",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.token}}).then(function(e){e.data.data.orders.length<=0?a.setState({noOrders:!0,isLoading:!1}):a.setState({orders:e.data.data.orders,isLoading:!1,noOrders:!1})}).catch(function(e){a.setState({isLoading:!1})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.onFetchOrders()}},{key:"render",value:function(){var e;return e=this.state.isLoading?r.a.createElement(S,null):this.state.noOrders?r.a.createElement("h1",null,"No Orders Yet!!"):r.a.createElement(oe,{orders:this.state.orders}),r.a.createElement("div",{className:"orders"},r.a.createElement("h1",null,"Your ",r.a.createElement("span",null,"Orders")),e)}}]),t}(n.Component),ce=Object(g.b)(function(e){return{token:e.token,userId:e.userId}})(se),ue=function(e,t){return function(a){function n(){var e,t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={error:null},t.closeBackdrop=function(){t.setState({error:null})},t}return Object(m.a)(n,a),Object(s.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.reqInterceptors=t.interceptors.request.use(function(t){return e.setState({error:null}),t}),this.resInterceptors=t.interceptors.response.use(function(e){return e},function(t){e.setState({error:t})})}},{key:"componentWillUnmount",value:function(){t.interceptors.request.eject(this.reqInterceptors),t.interceptors.response.eject(this.resInterceptors)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{show:this.state.error,close:this.closeBackdrop},r.a.createElement("div",{className:"error_message_parent"},r.a.createElement("p",{className:"error_message"},this.state.error&&this.state.error.response?this.state.error.response.data.errors[0].message:null))),r.a.createElement(e,this.props))}}]),n}(n.Component)},me=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.checkAuth()}},{key:"render",value:function(){return r.a.createElement(I,null,r.a.createElement(d.d,null,this.props.isAuthenticated?null:r.a.createElement(d.b,{path:"/authenticate",exact:!0,component:R}),this.props.isAuthenticated?null:r.a.createElement(d.b,{path:"/signin",exact:!0,component:G}),this.props.isAuthenticated?r.a.createElement(d.b,{path:"/logout",exact:!0,component:J}):null,this.props.isAuthenticated?r.a.createElement(d.b,{path:"/new",exact:!0,component:Y}):null,this.props.isAuthenticated?r.a.createElement(d.b,{path:"/cart",exact:!0,component:ie}):null,this.props.isAuthenticated?r.a.createElement(d.b,{path:"/edit/:id",exact:!0,component:Y}):null,this.props.isAuthenticated?r.a.createElement(d.b,{path:"/orders",exact:!0,component:ce}):null,this.props.isAuthenticated?r.a.createElement(d.b,{path:"/mobile/:id",exact:!0,component:K}):null,r.a.createElement(d.b,{path:"/",exact:!0,component:D}),r.a.createElement(d.a,{to:"/"})))}}]),t}(n.Component),de=ue(Object(d.f)(Object(g.b)(function(e){return{isAuthenticated:null!==e.token}},function(e){return{checkAuth:function(){return e(U())}}})(me)),T.a),pe=a(19),he={token:null,userId:null,firstname:null},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(q.a)({},e,{token:t.token,userId:t.userId,firstname:t.firstname,error:null});case"LOGOUT":return Object(q.a)({},e,{token:null,userId:null,firstname:null,error:null});default:return e}},be=a(65),ve=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.c,ge=Object(pe.d)(fe,ve(Object(pe.a)(function(e){return function(e){return function(t){return e(t)}}},be.a))),Ee=r.a.createElement(g.a,{store:ge},r.a.createElement(p.a,null,r.a.createElement(de,null)));l.a.render(Ee,document.getElementById("root"))},38:function(e,t,a){e.exports=a.p+"static/media/logo.9f7e506d.svg"},64:function(e,t,a){e.exports=a.p+"static/media/trash.1a439f85.jpg"},66:function(e,t,a){e.exports=a(147)},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.8a9fef9c.chunk.js.map